# Copyright (c) Ultraviolet
# SPDX-License-Identifier: Apache-2.0

volumes:
  vllm-cache:
    driver: local

services:
  vllm:
    profiles: ["vllm"]
    container_name: vllm
    image: vllm/vllm-openai:v0.10.2
    restart: unless-stopped
    command: >
      --model ${VLLM_MODEL:-microsoft/DialoGPT-medium}
      --host 0.0.0.0
      --port 8000
      --trust-remote-code
      --max-model-len 1024
      --device cpu
    volumes:
      - vllm-cache:/root/.cache
    networks:
      - cube-network
    environment:
      - VLLM_LOGGING_LEVEL=${VLLM_LOGGING_LEVEL}
      - VLLM_TARGET_DEVICE=cpu
