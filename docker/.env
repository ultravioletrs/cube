# Copyright (c) Abstract Machines
# SPDX-License-Identifier: Apache-2.0
# Docker: Environment variables in Compose

## Nats
SMQ_NATS_PORT=4222
SMQ_NATS_HTTP_PORT=8222
SMQ_NATS_JETSTREAM_KEY="dHisY5tpH2B3Mz6qGZJKMdMYykRh7v"
SMQ_NATS_URL=nats://nats:${SMQ_NATS_PORT}

## Jaeger
SMQ_JAEGER_COLLECTOR_OTLP_ENABLED=true
SMQ_JAEGER_FRONTEND=16686
SMQ_JAEGER_OLTP_HTTP=4318
SMQ_JAEGER_URL=http://jaeger:4318/v1/traces
SMQ_JAEGER_TRACE_RATIO=1.0
SMQ_JAEGER_MEMORY_MAX_TRACES=5000

## Event Store
SMQ_ES_TYPE=nats
SMQ_ES_URL=${SMQ_NATS_URL}

## Call home
SMQ_SEND_TELEMETRY=false

## Postgres
SMQ_POSTGRES_MAX_CONNECTIONS=100

## Core Services

### Auth
SMQ_AUTH_LOG_LEVEL=debug
SMQ_AUTH_HTTP_HOST=auth
SMQ_AUTH_HTTP_PORT=8189
SMQ_AUTH_HTTP_SERVER_CERT=
SMQ_AUTH_HTTP_SERVER_KEY=
SMQ_AUTH_GRPC_HOST=auth
SMQ_AUTH_GRPC_PORT=8181
SMQ_AUTH_GRPC_SERVER_CERT=${GRPC_MTLS:+./ssl/certs/auth-grpc-server.crt}${GRPC_TLS:+./ssl/certs/auth-grpc-server.crt}
SMQ_AUTH_GRPC_SERVER_KEY=${GRPC_MTLS:+./ssl/certs/auth-grpc-server.key}${GRPC_TLS:+./ssl/certs/auth-grpc-server.key}
SMQ_AUTH_GRPC_SERVER_CA_CERTS=${GRPC_MTLS:+./ssl/certs/ca.crt}${GRPC_TLS:+./ssl/certs/ca.crt}
SMQ_AUTH_DB_HOST=auth-db
SMQ_AUTH_DB_PORT=5432
SMQ_AUTH_DB_USER=supermq
SMQ_AUTH_DB_PASS="F3moL284CN"
SMQ_AUTH_DB_NAME=auth
SMQ_AUTH_DB_SSL_MODE=disable
SMQ_AUTH_DB_SSL_CERT=
SMQ_AUTH_DB_SSL_KEY=
SMQ_AUTH_DB_SSL_ROOT_CERT=
SMQ_AUTH_SECRET_KEY="ZA4vBf79fy6mrvQD2XnMqc4vNB9WDz"
SMQ_AUTH_ACCESS_TOKEN_DURATION="1h"
SMQ_AUTH_REFRESH_TOKEN_DURATION="24h"
SMQ_AUTH_INVITATION_DURATION="168h"
SMQ_AUTH_ADAPTER_INSTANCE_ID=
SMQ_AUTH_URL=http://auth:8189
SMQ_AUTH_KEYS_ALGORITHM="EdDSA"
SMQ_AUTH_KEYS_PRIVATE_KEY_PATH="./ssl/keys/private.key"
SMQ_AUTH_JWKS_URL=http://${SMQ_AUTH_HTTP_HOST}:${SMQ_AUTH_HTTP_PORT}/keys/.well-known/jwks.json
SMQ_AUTH_JWKS_CACHE_MAX_AGE=900
SMQ_AUTH_JWKS_CACHE_STALE_WHILE_REVALIDATE=60

#### Auth GRPC Client Config
SMQ_AUTH_GRPC_URL=auth:8181
SMQ_AUTH_GRPC_TIMEOUT=300s
SMQ_AUTH_GRPC_CLIENT_CERT=${GRPC_MTLS:+./ssl/certs/auth-grpc-client.crt}
SMQ_AUTH_GRPC_CLIENT_KEY=${GRPC_MTLS:+./ssl/certs/auth-grpc-client.key}
SMQ_AUTH_GRPC_CLIENT_CA_CERTS=${GRPC_MTLS:+./ssl/certs/ca.crt}

### Domains
SMQ_DOMAINS_LOG_LEVEL=debug
SMQ_DOMAINS_HTTP_HOST=domains
SMQ_DOMAINS_HTTP_PORT=9003
SMQ_DOMAINS_HTTP_SERVER_KEY=
SMQ_DOMAINS_HTTP_SERVER_CERT=
SMQ_DOMAINS_GRPC_HOST=domains
SMQ_DOMAINS_GRPC_PORT=7003
SMQ_DOMAINS_DB_HOST=domains-db
SMQ_DOMAINS_DB_PORT=5432
SMQ_DOMAINS_DB_NAME=domains
SMQ_DOMAINS_DB_USER=supermq
SMQ_DOMAINS_DB_PASS=supermq
SMQ_DOMAINS_DB_SSL_MODE=
SMQ_DOMAINS_DB_SSL_KEY=
SMQ_DOMAINS_DB_SSL_CERT=
SMQ_DOMAINS_DB_SSL_ROOT_CERT=
SMQ_DOMAINS_INSTANCE_ID=
SMQ_REDIS_TCP_PORT=6379
SMQ_DOMAINS_CACHE_URL=redis://domains-redis:${SMQ_REDIS_TCP_PORT}/0
SMQ_DOMAINS_CACHE_KEY_DURATION=10m

#### Domains Client Config
SMQ_DOMAINS_URL=http://domains:9003
SMQ_DOMAINS_GRPC_URL=domains:7003
SMQ_DOMAINS_GRPC_TIMEOUT=300s
SMQ_DOMAINS_GRPC_CLIENT_CERT=${GRPC_MTLS:+./ssl/certs/domains-grpc-client.crt}
SMQ_DOMAINS_GRPC_CLIENT_KEY=${GRPC_MTLS:+./ssl/certs/domains-grpc-client.key}
SMQ_DOMAINS_GRPC_CLIENT_CA_CERTS=${GRPC_MTLS:+./ssl/certs/ca.crt}

### SpiceDB Datastore config
SMQ_SPICEDB_DB_USER=supermq
SMQ_SPICEDB_DB_PASS="XZf3r8nG7L"
SMQ_SPICEDB_DB_NAME=spicedb
SMQ_SPICEDB_DB_PORT=5432

### SpiceDB config
SMQ_SPICEDB_PRE_SHARED_KEY="yejaTYpqgwqn8ACsnt4qzUso9z5auY"
SMQ_SPICEDB_SCHEMA_FILE="/schema.zed"
SMQ_SPICEDB_HOST=spicedb
SMQ_SPICEDB_PORT=50051
SMQ_SPICEDB_DATASTORE_ENGINE=postgres

### Invitations
SMQ_INVITATIONS_LOG_LEVEL=info
SMQ_INVITATIONS_HTTP_HOST=invitations
SMQ_INVITATIONS_HTTP_PORT=9020
SMQ_INVITATIONS_HTTP_SERVER_CERT=
SMQ_INVITATIONS_HTTP_SERVER_KEY=
SMQ_INVITATIONS_DB_HOST=invitations-db
SMQ_INVITATIONS_DB_PORT=5432
SMQ_INVITATIONS_DB_USER=supermq
SMQ_INVITATIONS_DB_PASS="Eo5F3f9nlC"
SMQ_INVITATIONS_DB_NAME=invitations
SMQ_INVITATIONS_DB_SSL_MODE=disable
SMQ_INVITATIONS_DB_SSL_CERT=
SMQ_INVITATIONS_DB_SSL_KEY=
SMQ_INVITATIONS_DB_SSL_ROOT_CERT=
SMQ_INVITATIONS_INSTANCE_ID=
SMQ_INVITATIONS_URL=http://invitations:9020

### Users
SMQ_USERS_LOG_LEVEL=debug
SMQ_USERS_SECRET_KEY="n9U6vd2AHQfuAu89Eyg3rbQCPWaKp7"
SMQ_USERS_ADMIN_EMAIL=admin@example.com
SMQ_USERS_ADMIN_PASSWORD="m2N2Lfno"
SMQ_USERS_ADMIN_USERNAME=admin
SMQ_USERS_ADMIN_FIRST_NAME=super
SMQ_USERS_ADMIN_LAST_NAME=admin
SMQ_USERS_PASS_REGEX=^.{8,}$
SMQ_USERS_ACCESS_TOKEN_DURATION=15m
SMQ_USERS_REFRESH_TOKEN_DURATION=24h
SMQ_TOKEN_RESET_ENDPOINT=/reset-request
SMQ_USERS_HTTP_HOST=users
SMQ_USERS_HTTP_PORT=9002
SMQ_USERS_HTTP_SERVER_CERT=
SMQ_USERS_HTTP_SERVER_KEY=
SMQ_USERS_DB_HOST=users-db
SMQ_USERS_DB_PORT=5432
SMQ_USERS_DB_USER=supermq
SMQ_USERS_DB_PASS="7TSS3FW7yt"
SMQ_USERS_DB_NAME=users
SMQ_USERS_DB_SSL_MODE=disable
SMQ_USERS_DB_SSL_CERT=
SMQ_USERS_DB_SSL_KEY=
SMQ_USERS_DB_SSL_ROOT_CERT=
SMQ_USERS_INSTANCE_ID=
SMQ_USERS_ALLOW_SELF_REGISTER=true
SMQ_ALLOW_UNVERIFIED_USER=true
SMQ_OAUTH_UI_REDIRECT_URL=__CUBE_PUBLIC_URL__/api/auth/token
SMQ_OAUTH_UI_ERROR_URL=__CUBE_PUBLIC_URL__/login
SMQ_USERS_DELETE_INTERVAL=24h
SMQ_USERS_DELETE_AFTER=720h
SMQ_USERS_URL=http://users:9002
SMQ_PASSWORD_RESET_URL_PREFIX=__CUBE_PUBLIC_URL__/password-reset
SMQ_PASSWORD_RESET_EMAIL_TEMPLATE=password-reset.tmpl
SMQ_VERIFICATION_URL_PREFIX=__CUBE_PUBLIC_URL__/api/verify-email
SMQ_VERIFICATION_EMAIL_TEMPLATE=verification.tmpl

### Email utility
SMQ_EMAIL_HOST=__SMQ_EMAIL_HOST__
SMQ_EMAIL_PORT=__SMQ_EMAIL_PORT__
SMQ_EMAIL_USERNAME=__SMQ_EMAIL_USERNAME__
SMQ_EMAIL_PASSWORD=__SMQ_EMAIL_PASSWORD__
SMQ_EMAIL_FROM_ADDRESS=__SMQ_EMAIL_FROM_ADDRESS__
SMQ_EMAIL_FROM_NAME=Cube AI
SMQ_EMAIL_TEMPLATE=email.tmpl

### Google OAuth2
SMQ_GOOGLE_CLIENT_ID=
SMQ_GOOGLE_CLIENT_SECRET=
SMQ_GOOGLE_REDIRECT_URL=
SMQ_GOOGLE_STATE=

# Docker image tag
SMQ_RELEASE_TAG=v0.18.3

# Proxy
UV_CUBE_PROXY_LOG_LEVEL=debug
UV_CUBE_PROXY_HOST=0.0.0.0
UV_CUBE_PROXY_PORT=8900
UV_CUBE_PROXY_SERVER_CERT=
UV_CUBE_PROXY_SERVER_KEY=
UV_CUBE_AGENT_URL=__CUBE_INTERNAL_AGENT_URL__
UV_CUBE_PROXY_INSTANCE_ID=
UV_CUBE_PROXY_ROUTER_CONFIG=/etc/cube/proxy/config.json

## Guardrails Sidecar Configuration
UV_CUBE_GUARDRAILS_ENABLED=true
UV_CUBE_GUARDRAILS_URL=http://guardrails:8001

## Proxy DB
UV_CUBE_PROXY_DB_HOST=cube-proxy-db
UV_CUBE_PROXY_DB_PORT=5432
UV_CUBE_PROXY_DB_USER=supermq
UV_CUBE_PROXY_DB_PASS="XZf3r8nG7L"
UV_CUBE_PROXY_DB_NAME=cube-proxy
UV_CUBE_PROXY_DB_SSL_MODE=disable
UV_CUBE_PROXY_DB_SSL_CERT=
UV_CUBE_PROXY_DB_SSL_KEY=
UV_CUBE_PROXY_DB_SSL_ROOT_CERT=

# Agent
UV_CUBE_AGENT_TARGET_URL=http://ollama:11434
UV_CUBE_AGENT_LOG_LEVEL=debug
UV_CUBE_AGENT_HOST=0.0.0.0
UV_CUBE_AGENT_PORT=8901
UV_CUBE_AGENT_SERVER_CERT=
UV_CUBE_AGENT_SERVER_KEY=
UV_CUBE_AGENT_INSTANCE_ID=

# Agent mTLS Configuration (for proxy to agent communication)
UV_CUBE_AGENT_CLIENT_CERT=/etc/cube/certs/client.crt
UV_CUBE_AGENT_CLIENT_KEY=/etc/cube/certs/client.key
UV_CUBE_AGENT_SERVER_CA_CERTS=/etc/cube/certs/ca.pem
UV_CUBE_AGENT_ATTESTED_TLS=true
UV_CUBE_AGENT_ATTESTATION_POLICY=/etc/cube/tdx_policy.json
UV_CUBE_AGENT_PRODUCT_NAME=Milan

#UI
UV_CUBE_UI_NAME="Cube AI"
UI_PORT=6193
UV_RUNTIME_ENV=production
UV_CUBE_UI_BASE_PATH=/
UV_CUBE_PUBLIC_BASE_PATH=/
MG_UI_TYPE=cube-ai
UV_CUBE_UI_NEXTAUTH_SECRET="cZAcFIdjxebC1XDULvfoXs_sO7ufCTRo3hW2lXtMoCvcSKkTyP"
# change  IP address to your local IP address
UV_CUBE_NEXTAUTH_URL=__CUBE_PUBLIC_URL__
UV_CUBE_UI_DOCKER_ACCEPT_EULA=yes
UV_CUBE_NODE_ENV=

#vllm
NVIDIA_VISIBLE_DEVICES=all
NVIDIA_DRIVER_CAPABILITIES=compute,utility
VLLM_LOGGING_LEVEL=INFO

# UI LLM Configuration (supports both ollama and vllm via proxy)
UV_CUBE_UI_LLM_BASE_URL=http://cube-proxy:${UV_CUBE_PROXY_PORT}
UV_CUBE_UI_LLM_DEFAULT_MODEL=tinyllama:1.1b

## Guardrails DB
UV_GUARDRAILS_DB_HOST=cube-guardrails-db
UV_GUARDRAILS_DB_PORT=5432
UV_GUARDRAILS_DB_USER=guardrails
UV_GUARDRAILS_DB_PASS=guardrails
UV_GUARDRAILS_DB_NAME=guardrails
